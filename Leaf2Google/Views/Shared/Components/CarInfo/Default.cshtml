@model Leaf2Google.Models.Car.CarInfoModel

@{
    @if(Model != null)
    {
        <div class="row">
            <div class="col col-md-4 col-12">
                <i class="bi bi-battery-half"><label for="batteryStatus" class="form-label w-100">Battery</label></i>
                <l2g-chargestatus percentage="@(Model.carlock?.CapacityRemaining ?? 100)"></l2g-chargestatus>
                <i class="bi bi-controller"><label for="vehicleControls" class="form-label w-100">Vehicle Controls</label></i>
                <div id="vehicleControls" class="btn-group w-100 mb-3">
                    <input type="number" min="5" max="15" value="5" placeholder="Duration" aria-label="Action Time">
                    <button type="button" data-itemid="flash" class="btn btn-primary"><i class="bi bi-lamp-fill"></i>Flash Lights</button>
                    <button type="button" data-itemid="horn" class="btn btn-primary"><i class="bi bi-megaphone-fill"></i>Beep Horn</button>
                </div>
                @* I really wamt to use Angular... some dynamic binding to values and inline tags are so familiar and easy to work with... not to mention custom HTML elements!? TODO: Probably do that *@
                @* This looks awesome https://steele.blue/custom-elements-angularjs/ talk about re-usability... dang why did I not know about this from the start :( *@
                <i class="bi bi-thermometer-half"><label for="climateRange" class="form-label w-100">@($"Climate Control - Current {Model.thermostat.LastTemperature}c")</label></i>
                <input type="range" class="form-range mb-0" min="16" max="26" value="@($"{Model.thermostat.Target}")" oninput="$('#climateButton').html(`<i class='` + $('#climateButton').attr('data-icon') + `'></i> Set to ` + this.value + `c`)" id="climateRange">
                <div id="vehicleControls" class="btn-group w-100 mb-3">
                    <button type="button" class="btn btn-primary" data-icon="bi bi-fan" id="climateButton">@($"Set to {Model.thermostat.Target}c")</button>
                </div>
            </div>
            <div class="col col-md-8 col-12 table-responsive-lg">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th scope="col">Locked</th>
                            <th scope="col">Minutes Until Full</th>
                            <th scope="col">Killometers Remaining</th>
                            <th scope="col">Plugged In</th>
                            <th scope="col">Charging</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>@(Model.carlock.Locked ? "Yes" : "No")</td>
                            <td>@(Model.carlock.MinutesTillFull)</td>
                            <td>@(Model.carlock.KillometersRemaining)</td>
                            <td>@(Model.carlock.IsPluggedIn ? "Yes" : "No")</td>
                            <td>@(Model.carlock.IsCharging ? "Yes" : "No")</td>
                        </tr>
                    </tbody>
                </table>
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th scope="col">Temperature</th>
                            <th scope="col">Target</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>@(Model.thermostat.LastTemperature)</td>
                            <td>@(Model.thermostat.Target)</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    }
    else
    {
        @Html.DisplayText("Please select a vehicle.")
    }
}
